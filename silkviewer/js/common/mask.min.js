(function(s){s.fn.mask=function(a,e,t,i){s(this).each(function(){null==t&&(t=!0);var d="#cccccc";if(i&&(d=i),void 0!==e&&e>0&&null!=e){var n=s(this);n.data("_mask_timeout",setTimeout(function(){s.maskElement(n,a,t,d)},e))}else s.maskElement(s(this),a,t,d)})},s.fn.unmask=function(){s(this).each(function(){s.unmaskElement(s(this))})},s.fn.isMasked=function(){return this.hasClass("masked")},s.maskElement=function(a,e,t,i){void 0!==a.data("_mask_timeout")&&(clearTimeout(a.data("_mask_timeout")),a.removeData("_mask_timeout")),a.isMasked()&&s.unmaskElement(a),"static"==a.css("position")&&a.addClass("masked-relative"),a.addClass("masked");var d=s('<div class="loadmask"></div>');if(d.css({backgroundColor:i}),navigator.userAgent.toLowerCase().indexOf("msie")>-1&&(d.height(a.height()+parseInt(a.css("padding-top"))+parseInt(a.css("padding-bottom"))),d.width(a.width()+parseInt(a.css("padding-left"))+parseInt(a.css("padding-right")))),navigator.userAgent.toLowerCase().indexOf("msie 6")>-1&&a.find("select").addClass("masked-hidden"),a.append(d),d.show(),void 0!==e&&null!=e){var n=s('<div class="loadmask-msg" style="display:none;"></div>');t?n.append('<div class="mask_lading">'+e+"</div>"):n.append('<div  class="normal">'+e+"</div>"),a.append(n),n.css("top",Math.round(a.height()/2-(n.height()-parseInt(n.css("padding-top"))-parseInt(n.css("padding-bottom")))/2)+"px"),n.css("left",Math.round(a.width()/2-(n.width()-parseInt(n.css("padding-left"))-parseInt(n.css("padding-right")))/2)+"px"),n.show()}},s.unmaskElement=function(s){void 0!==s.data("_mask_timeout")&&(clearTimeout(s.data("_mask_timeout")),s.removeData("_mask_timeout")),s.find(".loadmask-msg,.loadmask").remove(),s.removeClass("masked"),s.removeClass("masked-relative"),s.find("select").removeClass("masked-hidden")}})(jQuery);