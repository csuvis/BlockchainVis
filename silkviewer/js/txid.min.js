$(function(){function t(t){$.ajax({type:"get",async:!0,url:t,success:function(t){$("#s_lastestheight").html(t.height),$("#s_trans").html(t.transactions),$("#s_addrs").html(t.addresses),$("#block_trans").show()},error:function(t){console.log(t.statusText)}})}function e(t){$("#detailTable").mask(),$("#coin_glyph").mask(),$("#vinslistTable").mask(),$("#voutslistTable").mask(),$.ajax({type:"get",async:!0,url:t,success:function(t){t&&t.vout.length>0&&t.vout[0].value+0==0&&t.vout.shift(),a(t),$("#detailTable").unmask(),$(".moreshow").addClass("tt");var e=!0;$("#optionsRadios1").on("click",function(){e?($(".moreshow").removeClass("tt"),e=!1):($(".moreshow").addClass("tt"),e=!0)}),s(t),$("#vinslistTable").unmask(),n(t),$("#voutslistTable").unmask(),$("#coin_glyph").unmask()},error:function(t){console.error(t)}}),$("#tokentransferlistTable").mask(),$.ajax({type:"get",async:!0,url:i.url,success:function(t){r(t),$("#tokentransferlistTable").unmask()},error:function(t){console.error(t)}})}function a(t){$("#txid").text(t.txid),$("#blockhash").text(t.blockhash),$("#blockhash_href").attr("href","/block/blockhash.html?hash="+t.blockhash),$("#time").text(cnen_timeformater(t.time)),$("#size").text(t.size+" Bytes"),$("#confirmations").text(t.confirmations),$("#vins").text(t.vin.length),$("#vouts").text(t.vout.length),$("#totalInput").text(t.valueIn+" SLU"),$("#totalOutput").text(t.valueOut+" SLU");try{t.fees>0?$("#fees").text(t.fees+" SLU"):$("#trfees").hide()}catch(t){console.error(t)}}function s(t){$("#vinslistTable").bootstrapTable({data:t.vin,pagination:!0,pageList:[5,10,25],pageSize:10,columns:[{title:$.i18n.prop("bt-vins"),field:"addr",align:"left",formatter:function(t,e,a){var s="Coinbase.";return e.coinbase||(s="<a href='/address/addr.html?addr="+e.addr+"'>"+e.addr+"</a>&nbsp;&nbsp;",s=s+"<a href='/transaction/txid.html?txid="+e.txid+"'>"+e.value+" SLU["+e.vout+"]</a>"),s}}]}),$("#vinslistTable").removeClass("table-bordered")}function n(t){$("#voutslistTable").bootstrapTable({data:t.vout,pagination:!0,pageList:[5,10,25],num_edge_entries:1,pageSize:10,columns:[{title:$.i18n.prop("bt-vouts"),field:"n",align:"left",formatter:function(t,e,a){var s="Empty output.";try{e.scriptPubKey.addresses&&(s="<a href='/address/addr.html?addr="+e.scriptPubKey.addresses[0]+"'>"+e.scriptPubKey.addresses[0]+"</a>&nbsp;&nbsp;"+e.value,""!=e.spentTxId&&null!=e.spentTxId?s=s+"<a href='/transaction/txid.html?txid="+e.spentTxId+"'>[S]</a>":s+="[U]")}catch(t){console.error(t)}return s}}]}),$("#voutslistTable").removeClass("table-bordered")}function r(t){t.items.length>0?$("#tokentransferlistTable").bootstrapTable({data:t.items,pagination:!0,columns:[{title:$.i18n.prop("bt-from"),field:"from",align:"left",formatter:function(t,e,a){return"<a href='/address/addr.html?addr="+t+"'>"+t+"</a>"}},{title:$.i18n.prop("bt-to"),field:"to",align:"left",formatter:function(t,e,a){return"<a href='/address/addr.html?addr="+t+"'>"+t+"</a>"}},{title:$.i18n.prop("bt-value"),field:"value",align:"left",formatter:function(t,e,a){var s=t;try{s=e.value/10**e.decimals,s+=" "+e.symbol}catch(t){console.error(t)}return s}}]}):($("#tokentransferlistTable").hide(),$("#h4tokentransferlistTable").hide())}var o,i,l=UrlParam.param("txid");l=l.replace(/(^\s*)|(\s*$)/g,""),o=0==datasource?{url:"/jsondata/txid.json",newblock:"/jsondata/indexnew.json"}:{url:weburl+"/tx/"+l,newblock:weburl+"/silkchain/indexnew"},i=0==datasource?{url:"/jsondata/tokentransfer.json"}:{url:weburl+"/tokenTransfer?txHash="+l};t(o.newblock),e(o.url),$("#showhideBtn").bind("click",function(){var t=$("#showhideBtn").text();"显示"==t||"Show"==t?($("#showhideBtn").text($.i18n.prop("btn-hide")),$("#showhideDiv").show()):($("#showhideBtn").text($.i18n.prop("btn-show")),$("#showhideDiv").hide())})});