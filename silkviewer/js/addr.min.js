$(function(){function t(t){$.ajax({type:"get",async:!0,url:t,success:function(t){$("#s_lastestheight").html(t.height),$("#s_trans").html(t.transactions),$("#s_addrs").html(t.addresses),$("#block_trans").show()},error:function(t){console.log(t.statusText)}})}function e(t){$("#detailTable").mask(),$.ajax({type:"get",async:!0,url:t,success:function(t){t.balance,$(".static_chart").mask(),a(t),$("#detailTable").unmask(),$(".moreshow").addClass("tt");var e=!0;$("#optionsRadios1").on("click",function(){e?($(".moreshow").removeClass("tt"),e=!1):($(".moreshow").addClass("tt"),e=!0)})},error:function(t){console.error(t)}}),$("#listTable").mask(),$.ajax({type:"get",async:!0,url:i.url+"?limit=50&fromtime="+x,success:function(t){n(t),$("#listTable").unmask()},error:function(t){console.error(t)}})}function a(t){$("#addrStr").text(t.addrStr),$("#balance").text(t.balance+" SLU"),t.unconfirmedBalance>0?$("#unconfirmedBalance").text(t.unconfirmedBalance+" SLU"):$("#trunconfirmed").hide(),$("#totalReceived").text(t.totalReceived+" SLU"),$("#totalSent").text(t.totalSent+" SLU"),$("#txApperances").text(t.txApperances)}function n(t){$("#listTable").bootstrapTable("destroy"),$("#listTable").bootstrapTable({data:t.items,pagination:!0,columns:[{title:$.i18n.prop("bt-txid"),field:"txid",align:"center",formatter:function(t,e,a){var n="<a href='/transaction/txid.html?txid="+t+"'>"+t+"</a>";return n}},{title:$.i18n.prop("bt-confirmations"),field:"confirmations",align:"center",sortable:!0},{title:$.i18n.prop("bt-vin_count"),field:"vins",align:"center",sortable:!0},{title:$.i18n.prop("bt-vout_count"),field:"vouts",align:"center",sortable:!0},{title:$.i18n.prop("bt-time"),field:"time",align:"center",sortable:!0,formatter:function(t,e,a){return cnen_timeformater(t)}}]})}function r(t){var e=new RegExp("^/address/(\\w{36})$");return!!e.test(t)}var o,i,s,l=UrlParam.param("addr");if(void 0===l||36!=l.length){var d=GetUrlRelativePath();if(r(d)){var c=d.split("/");l=c[2]}else{var u=$.i18n.prop("Addressinvalid");top.location.href="/info.html?message="+encodeURIComponent(u)}}o=0==datasource?{url:"/jsondata/addr.json",newblock:"/jsondata/indexnew.json"}:{url:weburl+"/addr/"+l+"?noTxList=1",newblock:weburl+"/silkchain/indexnew"},0==datasource||weburl,0==datasource||weburl,i=0==datasource?{url:"/jsondata/addrVoutxrange.json"}:{url:weburl+"/silkchain/addr/"+l+"/voutxrange"};var h=new Date,m=h.format("m/d/Y"),f=m+" 00:00:01",b=new Date(f),p=m+" 23:59:59",w=new Date(p),x=(b.getTime(),w.getTime()/1e3);s=0==datasource?{url:"/jsondata/addrtimesvalue2.json"}:{url:weburl+"/silkchain/addr/"+l+"/historynew?from_date_time=1560355199"},testArray.addr.indexOf(l)>=0&&(s.url="/jsontest/addr/history/"+l+".json",i.url="/jsontest/addr/voutxrange/"+l+".json");var v=$(".static_chart").width(),g=Math.max(.3*v,150);d3.select(".static_chart").append("svg").attr("width",v).attr("height",.85*g);t(o.newblock),e(o.url);$("#showhideBtn").bind("click",function(){var t=$("#showhideBtn").text();"显示"==t||"Show"==t?($("#showhideBtn").text($.i18n.prop("btn-hide")),$("#showhideDiv").show()):($("#showhideBtn").text($.i18n.prop("btn-show")),$("#showhideDiv").hide())})});