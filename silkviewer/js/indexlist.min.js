$(function(){function t(t){$.ajax({type:"get",async:!0,url:t,success:function(t){$("#s_lastestheight").html(t.height),$("#s_trans").html(t.transactions),$("#s_addrs").html(t.addresses),$("#block_trans").show()},error:function(t){console.log(t.statusText)}})}function e(t){$("#listTableDiv").mask(),$("#listTable2Div").mask(),$.ajax({type:"get",async:!0,url:t,success:function(t){for(let e=0;e<t.blocks.length;e++)t.blocks[e].txlength=t.blocks[e].txlength-1;n(t),$("#listTableDiv").unmask(),$("#listTableDiv").hide();for(var e=0;e<10;e++){var a=t.blocks[e];if(a.hash){var s=weburl+"/txs?block="+a.hash;$.ajax({type:"get",async:!1,url:s,success:function(t){i(t)}})}}l(o),$("#listTable2Div").unmask(),$("#listTable2Div").hide()},error:function(t){console.error(t.statusText)}})}function i(t){t.txs.shift(),t.txs.forEach(t=>{var e={};e.txid=t.txid,e.vin_count=t.vin.length,e.vout_count=t.vout.length,e.size=t.size,e.txfee=t.fees<0?0:t.fees,o.push(e)})}function n(t){$("#listTable").bootstrapTable({data:t.blocks,pagination:!1,columns:[{field:"height",title:$.i18n.prop("bi-Blockheight"),align:"center"},{field:"hash",title:$.i18n.prop("bi-Blockhash"),align:"center",formatter:function(t,e,i){var n=t.substring(0,5)+"..."+t.substring(59,64);return n="<a href='/block/blockhash.html?hash="+t+"'>"+n+"</a>",n}},{field:"txlength",title:$.i18n.prop("bi-Transactions"),align:"center"},{field:"size",title:$.i18n.prop("bi-Size"),align:"center"},{field:"minedBy",title:$.i18n.prop("bi-minedby"),align:"center"},{field:"time",title:$.i18n.prop("bi-Age"),align:"center",formatter:function(t,e,i){return cnen_timeformater(t)}}]})}function l(t){$("#listTable2").bootstrapTable("destroy"),$("#listTable2").bootstrapTable({data:t,pagination:!1,sortable:!0,columns:[{field:"txid",title:$.i18n.prop("bt-txid"),align:"center",formatter:function(t,e,i){var n="<a href='/transaction/txid.html?txid="+t+"'>"+t+"</a>";return n}},{field:"vin_count",title:$.i18n.prop("bt-vin_count"),align:"center",sortable:!0},{field:"vout_count",title:$.i18n.prop("bt-vout_count"),align:"center",sortable:!0},{field:"size",title:$.i18n.prop("bt-size"),align:"center",sortable:!0},{field:"txfee",title:$.i18n.prop("bt-txfee"),align:"center",sortable:!0}]})}var a;(new Date).getTime(),(new Date).getTimezoneOffset();a=0==datasource?{url:"/jsondata/blocklist.json",newblock:"/jsondata/indexnew.json"}:{url:weburl+"/blocks?limit=10&offset=0",newblock:weburl+"/silkchain/indexnew"},$("#datetimepicker").change(function(){console.log("change")}),t(a.newblock),e(a.url);var o=[]});