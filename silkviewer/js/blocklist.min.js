function ajaxNewBlock(e){$.ajax({type:"get",async:!0,url:e,success:function(e){$("#s_lastestheight").html(e.height),$("#s_trans").html(e.transactions),$("#s_addrs").html(e.addresses),$("#block_trans").show()},error:function(e){console.log(e.statusText)}})}function ajaxBlocks(e,t){$.ajax({type:"get",async:!0,url:e,success:function(e){for(let t=0;t<e.blocks.length;t++)e.blocks[t].txlength=e.blocks[t].txlength-1;blocksrender(e),$("#hreftoday").attr("href","/block/blocklist.html?blockDate="+t),$("#hrefleft").attr("href","/block/blocklist.html?blockDate="+e.pagination.prev),$("#hrefright").attr("href","/block/blocklist.html?blockDate="+e.pagination.next)},error:function(e){console.error(e.statusText)}})}function blocksrender(e){$("#listTable").bootstrapTable({data:e.blocks,pagination:!0,columns:[{field:"height",title:$.i18n.prop("bi-Blockheight"),align:"center"},{field:"hash",title:$.i18n.prop("bi-Blockhash"),align:"center",formatter:function(e,t,n){var a=e.substring(0,5)+"..."+e.substring(59,64);return a="<a href='/block/blockhash.html?hash="+e+"'>"+a+"</a>",a}},{field:"txlength",title:$.i18n.prop("bi-Transactions"),align:"center"},{field:"size",title:$.i18n.prop("bi-Size"),align:"center"},{field:"minedBy",title:$.i18n.prop("bi-minedby"),align:"center"},{field:"time",title:$.i18n.prop("bi-Age"),align:"center",formatter:function(e,t,n){return cnen_timeformater(e)}}]})}function FormatDateTime(e){var t=new Date(parseInt(e)),n=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var o=t.getDate();o=o<10?"0"+o:o;var l=t.getHours();l=l<10?"0"+l:l;var i=t.getMinutes(),r=t.getSeconds();return i=i<10?"0"+i:i,r=r<10?"0"+r:r,n+"-"+a+"-"+o}$(function(){var e,t=UrlParam.param("blockDate"),n=(new Date).getTime(),a=(new Date).getTimezoneOffset(),o=n+6e4*a,l=FormatDateTime(o);if(t){var i=/^\d{4}-\d{2}-\d{2}$/;if(!i.test(t)){var r="BlockHash invalid.";top.location.href="/info.html?message="+encodeURIComponent(r)}}else t=l;e=0==datasource?{url:"/jsondata/blocklist.json",newblock:"/jsondata/indexnew.json"}:{url:weburl+"/blocks?blockDate="+t,newblock:weburl+"/silkchain/indexnew"},$("#datetimepicker").change(function(){console.log("change")}),ajaxNewBlock(e.newblock),ajaxBlocks(e.url,l)});