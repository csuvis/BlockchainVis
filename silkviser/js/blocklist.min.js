function ajaxNewBlock(e){$.ajax({type:"get",async:!0,url:e,success:function(e){$("#s_lastestheight").html(e.height),$("#s_trans").html(e.transactions),$("#s_addrs").html(e.addresses),$("#block_trans").show()},error:function(e){console.log(e.statusText)}})}function ajaxBlocks(e,t){$.ajax({type:"get",async:!0,url:e,success:function(e){for(let t=0;t<e.blocks.length;t++)e.blocks[t].txlength=e.blocks[t].txlength-1;blocksrender(e)},error:function(e){console.error(e.statusText)}})}function blocksrender(e){$("#blocklistTable").bootstrapTable({data:e.blocks,pagination:!0,columns:[{field:"height",title:$.i18n.prop("bi-Blockheight"),align:"center"},{field:"hash",title:$.i18n.prop("bi-Blockhash"),align:"center",formatter:function(e,t,n){var a=e.substring(0,5)+"..."+e.substring(59,64);return a="<a href='/block/blockhash.html?hash="+e+"'>"+a+"</a>",a}},{field:"txlength",title:$.i18n.prop("bi-Transactions"),align:"center"},{field:"size",title:$.i18n.prop("bi-Size"),align:"center"},{field:"minedBy",title:$.i18n.prop("bi-minedby"),align:"center"},{field:"time",title:$.i18n.prop("bi-Age"),align:"center",formatter:function(e,t,n){return cnen_timeformater(e)}}]}),$("#listTableDiv").hide()}function FormatDateTime(e){var t=new Date(parseInt(e)),n=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var o=t.getDate();o=o<10?"0"+o:o;var i=t.getHours();i=i<10?"0"+i:i;var l=t.getMinutes(),r=t.getSeconds();return l=l<10?"0"+l:l,r=r<10?"0"+r:r,n+"-"+a+"-"+o}$(function(){var e,t=new Date;$("#datetimepicker1").datetimepicker({format:"yyyy-mm-dd",autoclose:!0,endDate:t,minView:2,forceParse:!0,todayBtn:!0}).on("changeDate",function(e){top.location.href="/block/blocklist.html?blockDate="+e.date.format("Y-m-d")});var n=UrlParam.param("blockDate"),a=(new Date).getTime(),o=(new Date).getTimezoneOffset(),i=a+6e4*o,l=FormatDateTime(i);if(n){var r=/^\d{4}-\d{2}-\d{2}$/;if(!r.test(n)){var s="BlockHash invalid.";top.location.href="/info.html?message="+encodeURIComponent(s)}$("#datetimeinput").val(n)}else n=l,$("#datetimeinput").val(l);e=0==datasource?{url:"/jsondata/blocklist.json",newblock:"/jsondata/indexnew.json"}:{url:weburl+"/blocks?blockDate="+n,newblock:weburl+"/silkchain/indexnew"},ajaxNewBlock(e.newblock),ajaxBlocks(e.url,l)});