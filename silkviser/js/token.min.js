$(function(){function t(t){$("#addrdetailTable").mask(),$.ajax({type:"get",async:!0,url:t,success:function(t){e(t),$("#addrdetailTable").unmask(),$("#tokenHolderlistTable").mask(),$.ajax({type:"get",async:!0,url:i.url,success:function(e){o(e,t),$("#tokenHolderlistTable").unmask()},error:function(t){console.error(t)}})},error:function(t){console.error(t)}}),$("#addrtokentxslistTable").mask(),$.ajax({type:"get",async:!0,url:s.url,success:function(t){a(t),$("#addrtokentxslistTable").unmask()},error:function(t){console.error(t)}})}function e(t){$("#contract_address").text(t.contract_address),$("#tx_hash").html("<a href='/transaction/txid.html?txid="+t.tx_hash+"'>"+t.tx_hash+"</a>"),$("#block_height").text(t.block_height),$("#tx_time").text(cnen_timeformater(t.tx_time)),$("#name").text(t.name);var e=t.total_supply/10**t.decimals;$("#total_supply").text(e+" "+t.symbol),$("#holders_count").text(t.holders_count),$("#transfers_count").text(t.transfers_count)}function r(t){var e=new RegExp("^/contract/(\\w{40})$");return!!e.test(t)}function n(t){t=t.toString().split(".");for(var e=t[0].split("").reverse(),r=[],n=0,a=e.length;n<a;n++)n%3==0&&0!==n&&r.push(","),r.push(e[n]);return r.reverse(),r=t[1]?r.join("").concat("."+t[1]):r.join(""),r}function a(t){t.items.length>0?$("#addrtokentxslistTable").bootstrapTable({data:t.items,pagination:!0,columns:[{title:$.i18n.prop("token-txhash"),field:"tx_hash",align:"center",formatter:function(t,e,r){return"<a href='/transaction/txid.html?txid="+t+"'>"+t.substr(0,3)+"..."+t.substr(t.length-3,t.length)+"</a>"}},{title:$.i18n.prop("token-from"),field:"from",align:"center",formatter:function(t,e,r){return"<a href='/address/addr.html?addr="+t+"'>"+t+"</a>"}},{title:$.i18n.prop("token-to"),field:"to",align:"center",formatter:function(t,e,r){return"<a href='/address/addr.html?addr="+t+"'>"+t+"</a>"}},{title:$.i18n.prop("token-values"),field:"value",align:"center",formatter:function(t,e,r){var n=t;try{n=e.value/10**e.decimals,n+=" "+e.symbol}catch(t){console.error(t)}return n}},{title:$.i18n.prop("token-time"),field:"tx_time",align:"center",formatter:function(t,e,r){return cnen_timeformater(t)}}]}):($("#addrtokentxslistTable").hide(),$("#h4addrtokentxslistTable").hide())}function o(t,e){t.items.length>0&&$("#tokenHolderlistTable").bootstrapTable({data:t.items,pagination:!0,columns:[{title:$.i18n.prop("token-holder-Address"),field:"address",align:"center",formatter:function(t,e,r){return"<a href='/address/addr.html?addr="+t+"'>"+t+"</a>"}},{title:$.i18n.prop("token-holder-Quantity"),field:"amount",align:"center",formatter:function(t,r,a){var o=t/10**e.decimals;return n(o)+"&nbsp;"+e.symbol}},{title:$.i18n.prop("token-holder-Percentage"),field:"amount",align:"center",formatter:function(t,r,n){var a=100*t/e.total_supply;return a.toFixed(2)+"%"}}]})}var l,s,i,d=UrlParam.param("contract_address");if(void 0===d||40!=d.length){var c=GetUrlRelativePath();if(r(c)){var u=c.split("/");hash=u[2]}else{var f=$.i18n.prop("Tokeninvalid");top.location.href="/info.html?message="+encodeURIComponent(f)}}l=0==datasource?{url:"/jsondata/token.json"}:{url:weburl+"/src20/"+d},s=0==datasource?{url:"/jsondata/tokentransfers.json"}:{url:weburl+"/src20/"+d+"/transfers?limit=50"},i=0==datasource?{url:"/jsondata/tokenbalances.json"}:{url:weburl+"/src20/"+d+"/balances?limit=50"},t(l.url)});